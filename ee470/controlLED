<?php
$contents = file_get_contents("results.txt");
$data = json_decode($contents, true);
$status = isset($data['led']) ? $data['led'] : 'Unknown';
?>

<!DOCTYPE html>
<html>
<head>
  <title>Control LED</title>
</head>
<body>
  <h2>Remote LED Control</h2>
  <p>Current LED Status: <strong><?php echo htmlspecialchars($status); ?></strong></p>

  <button onclick="updateLED('ON')">Turn ON</button>
  <button onclick="updateLED('OFF')">Turn OFF</button>

  <script>
    function updateLED(state) {
      fetch("updateled.php", {
        method: "PUT",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ led: state })
      })
      .then(response => response.text())
      .then(data => {
        alert(data);
        location.reload(); // Refresh to show updated status
      })
      .catch(error => console.error("Error:", error));
    }
  </script>
</body>
</html>
